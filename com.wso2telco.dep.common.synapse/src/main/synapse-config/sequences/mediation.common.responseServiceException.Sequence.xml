<?xml version="1.0" encoding="UTF-8"?>
<sequence name="mediation.common.responseServiceException.Sequence" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <payloadFactory media-type="json">
        <format>{
  "requestError": {
    "serviceException": {
      "messageId": "$1",
      "text": "$2",
      "variables": "$3"
    }
  }
}</format>
        <args>
            <arg evaluator="xml" expression="get-property('messageId')" xmlns:ns="http://org.apache.synapse/xsd"/>
            <arg evaluator="xml" expression="get-property('errorText')" xmlns:ns="http://org.apache.synapse/xsd"/>
            <arg evaluator="xml" expression="get-property('errorVariable')" xmlns:ns="http://org.apache.synapse/xsd"/>
        </args>
    </payloadFactory>
    <property expression="$ctx:httpStatusCode" name="HTTP_SC" scope="axis2" type="STRING"/>
    <respond/>
</sequence>
